TODO

1. 检查device和user是否为空，再检查规则的时候，而不是一开始检验失败就退出此流程
需要修改两个地方

2. 运行lamda的loadstring函数，需要不做异常

3. 优化规则查找方式
首先需按优先级来分别查找不同类型的规则，其次，每种规则使用mark当做key来hash存储

4. 数据库表role需要增加字段，duration，代表延迟执行的时间

